apiVersion: gameserver.martinheinz.dev/v1alpha1
kind: Server
metadata:
  name: csgo
spec:
  serverName: csgo
  gameName: "CSGO"
  port:  # These are defaults, can be omitted
    - port: 27015
      targetPort: 27015
      nodePort: 30015
  envFrom:
    - configMapRef:
        name: csgo
    - secretRef:
        name: csgo
  storage:
#    # This name defaults to .spec.serverName, if PVC with specified name exists,
#    # new one will NOT be created and existing will be used instead, regardless of the "size"
#    name: "csgo"
    size: 12Gi
  resources:
    requests:
      memory: "64Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "2"
---
apiVersion: gameserver.martinheinz.dev/v1alpha1
kind: Server
metadata:
  name: factorio
  namespace: default
spec:
  serverName: factorio
  gameName: Factorio
  envFrom:
    - configMapRef:
        name: factorio
    - secretRef:
        name: factorio
  resources:
    limits:
      cpu: "2"
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 64Mi
  storage:
    size: 12Gi
---
apiVersion: gameserver.martinheinz.dev/v1alpha1
kind: Server
metadata:
  name: rust
  namespace: default
spec:
  serverName: rust
  gameName: Rust
  envFrom:
    - configMapRef:
        name: rust
    - secretRef:
        name: rust
  resources:
    limits:
      cpu: "2"
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 64Mi
  storage:
    size: 12Gi